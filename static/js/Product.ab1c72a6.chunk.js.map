{"version":3,"file":"static/js/Product.ab1c72a6.chunk.js","mappings":"4RAgBQA,EAAiBC,uDAsGzB,EApG0B,WACtB,MAA8BC,EAAAA,WAA9B,eAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAoCF,EAAAA,SAAuB,GAA3D,eAAOG,EAAP,KAAmBC,EAAnB,KACA,EAAoCJ,EAAAA,SAAe,GAAnD,eAAOK,EAAP,KAAmBC,EAAnB,KAEMC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,KAETC,GAAcC,EAAAA,EAAAA,MAAdD,UACFE,GAAWC,EAAAA,EAAAA,KAAYC,EAAAA,EAAAA,GAAmBC,OAAOL,KACjDM,EAAgBJ,EAAWA,EAASK,MAAQ,EAC5CC,EAAaN,EAAWA,EAASO,IAAKC,EAAAA,EAAAA,KAkB5C,GAhBArB,EAAAA,WAAgB,WAAM,8CAElB,oHAE+BsB,EAAAA,GAAAA,IAAA,UAChBxB,EADgB,YACAa,IAH/B,gBAEgBY,EAFhB,EAEgBA,KAGRrB,EAAWqB,GALnB,gDAOQC,MAAM,cACNjB,EAAS,KARjB,0DAFkB,sBAClBkB,OAAOC,SAAS,EAAG,GADD,mCAalBC,KACD,CAAChB,EAAWJ,KAEVN,EACD,OAAO,+CAkBX,OACI,oBAAS2B,UAAU,yBAAnB,UACI,iBAAKA,UAAU,kCAAf,WACI,iBAAKA,UAAU,QAAf,WACI,iBAAMA,UAAU,cAAhB,SAA+B3B,EAAQ4B,QACvC,eAAID,UAAU,aAAd,SAA4B3B,EAAQ4B,WAExC,iBAAKD,UAAU,qBAAf,WACI,gBACIA,UAAU,oBACVE,IAAK7B,EAAQ8B,SACbC,IAAK/B,EAAQ4B,QAEjB,iBAAKD,UAAU,kCAAf,WACI,iBAAKA,UAAU,qBAAf,WACI,eAAIA,UAAU,sBAAd,0BACA,cAAGA,UAAU,qBAAb,SAAmC3B,EAAQgC,UAE/C,iBAAKL,UAAU,yCAAf,WACI,eAAIA,UAAU,sBAAd,qBACA,eAAGA,UAAU,+CAAb,UACK3B,EAAQiC,MADb,WAIJ,iBAAKN,UAAU,qBAAf,WACI,eAAIA,UAAU,sBAAd,6BAGA,SAAC,KAAD,CACIO,MAAOlC,EAAQkC,MACfC,MAAOnC,EAAQmC,MACf/B,WAAYA,EACZC,cAAeA,EACfH,WAAYA,EACZC,cAAeA,QAGvB,gBAAKwB,UAAU,qCAAf,UACI,SAAC,KAAD,CACIS,cAtDN,WAClB,IAAMC,EAAqB,CACvBlB,GAAID,EACJR,UAAWV,EAAQmB,GACnBS,KAAM5B,EAAQ4B,KACdK,MAAOjC,EAAQiC,MACfD,IAAKhC,EAAQgC,IACbF,SAAU9B,EAAQ8B,SAClBQ,KAAMtC,EAAQkC,MAAMhC,GAAYqC,SAChCC,KAAMxC,EAAQmC,MAAM/B,GACpBa,MAAO,GAEXT,GAASiC,EAAAA,EAAAA,IAAOJ,KA2CQrB,cAAeA,EACf0B,SAAS,oBACTC,QAAQ","sources":["pages/Product/index.tsx"],"sourcesContent":["import React from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nimport { v1 as uuidv1 } from 'uuid';\n\nimport { BuyButton, ProductOptions } from '../../components';\n\nimport { useAPPDispatch } from '../../store/store';\nimport { CartItemType } from '../../store/cart/types';\nimport { selectCartItemByID } from '../../store/cart/selectors';\nimport { buyNow } from '../../store/cart/slice';\n\nimport './Product.sass';\nimport { ProductItemType } from '../../store/product/types';\n\nconst { REACT_APP_DB } = process.env;\n\nconst Product: React.FC = () => {\n    const [product, setProduct] = React.useState<ProductItemType>();\n    const [activeType, setActiveType] = React.useState<number>(0);\n    const [activeSize, setActiveSize] = React.useState(0);\n\n    const navigate = useNavigate();\n    const dispatch = useAPPDispatch();\n\n    const { productID } = useParams();\n    const cartItem = useSelector(selectCartItemByID(String(productID)));\n    const cartItemCount = cartItem ? cartItem.count : 0;\n    const cartItemID = cartItem ? cartItem.id : uuidv1();\n\n    React.useEffect(() => {\n        window.scrollTo(0, 0);\n        async function fetchProduct() {\n            try {\n                const { data } = await axios.get(\n                    `${REACT_APP_DB}/${productID}`\n                );\n                setProduct(data);\n            } catch (err) {\n                alert('no product');\n                navigate('/');\n            }\n        }\n        fetchProduct();\n    }, [productID, navigate]);\n\n    if (!product) {\n        return <>'Loading...'</>;\n    }\n\n    const addItemToCart = () => {\n        const item: CartItemType = {\n            id: cartItemID,\n            productID: product.id,\n            name: product.name,\n            price: product.price,\n            ing: product.ing,\n            imageUrl: product.imageUrl,\n            type: product.types[activeType].typeName,\n            size: product.sizes[activeSize],\n            count: 0,\n        };\n        dispatch(buyNow(item));\n    };\n\n    return (\n        <section className=\"block-top product-page\">\n            <div className=\"container product-page__content\">\n                <div className=\"title\">\n                    <span className=\"title-decor\">{product.name}</span>\n                    <h1 className=\"title-text\">{product.name}</h1>\n                </div>\n                <div className=\"product-page__wrap\">\n                    <img\n                        className=\"product-page__img\"\n                        src={product.imageUrl}\n                        alt={product.name}\n                    />\n                    <div className=\"product-page__info product-info\">\n                        <div className=\"product-info__wrap\">\n                            <h4 className=\"product-info__title\">Ingredients</h4>\n                            <p className=\"product-info__desc\">{product.ing}</p>\n                        </div>\n                        <div className=\"product-info__wrap product-info__price\">\n                            <h4 className=\"product-info__title\">Price:</h4>\n                            <p className=\"product-info__desc product-info__price-count\">\n                                {product.price}$\n                            </p>\n                        </div>\n                        <div className=\"product-info__wrap\">\n                            <h4 className=\"product-info__title\">\n                                Choose options\n                            </h4>\n                            <ProductOptions\n                                types={product.types}\n                                sizes={product.sizes}\n                                activeSize={activeSize}\n                                setActiveSize={setActiveSize}\n                                activeType={activeType}\n                                setActiveType={setActiveType}\n                            />\n                        </div>\n                        <div className=\"product-info__wrap product-actions\">\n                            <BuyButton\n                                addItemToCart={addItemToCart}\n                                cartItemCount={cartItemCount}\n                                cssClass=\"product-page__btn\"\n                                btnText=\"Add to Cart\"\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n    );\n};\n\nexport default Product;\n"],"names":["REACT_APP_DB","process","React","product","setProduct","activeType","setActiveType","activeSize","setActiveSize","navigate","useNavigate","dispatch","useAPPDispatch","productID","useParams","cartItem","useSelector","selectCartItemByID","String","cartItemCount","count","cartItemID","id","uuidv1","axios","data","alert","window","scrollTo","fetchProduct","className","name","src","imageUrl","alt","ing","price","types","sizes","addItemToCart","item","type","typeName","size","buyNow","cssClass","btnText"],"sourceRoot":""}